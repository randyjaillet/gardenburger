window.gardenburgers=[];class Gardenburger{i;$n;$b;$s;$d;constructor($nav,options){"string"==typeof(options=options||{})&&(options=$.parseJSON(options)),this.settings=$.extend({breakpoint:450,mobileNavMode:"overlay",overflowText:""},options);const self=this;this.$n=$nav;let alreadyInstantiatedIndex=-1;if($.each(window.gardenburgers,((_i,v)=>{v&&v.$n.is(self.$n)&&(alreadyInstantiatedIndex=$.inArray(v,window.gardenburgers))})),alreadyInstantiatedIndex>=0)window.gardenburgers[alreadyInstantiatedIndex].destroy(!0),window.gardenburgers[alreadyInstantiatedIndex]=this;else{const firstUndefinedIndex=window.gardenburgers.findIndex((element=>void 0===element));firstUndefinedIndex>=0?window.gardenburgers[firstUndefinedIndex]=this:window.gardenburgers.push(this)}this.i=$(window.gardenburgers).index(this),this.$b=$($nav.data("gardenburger")),this.$d=this.$n.find("ul").first().find("ul, .nav-dropdown");const $surfUL=this.$n.find("ul").first(),$allLIs=this.$n.find("li"),$surfLIs=$surfUL.children("li"),$descLIs=$surfLIs.find("li"),$surfAs=$surfLIs.children("a, .nav-item"),$descAs=$descLIs.children("a, .nav-item"),$surfLIsWithULs=$surfLIs.has("ul, .nav-dropdown"),$descLIsWithULs=$descLIs.has("ul, .nav-dropdown"),$arrowRtSvg=$('<svg class="icon-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>'),$chevronDnSvg=$('<svg class="icon-chevron icon-chevron-dn" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>'),$chevronRtSvg=$('<svg class="icon-chevron icon-chevron-rt" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>'),$chevronDnSvgCompact=$('<svg class="icon-chevron-compact" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>'),$labelChevronCompact=$('<label class="label-chevron-compact">'),$labelChevronCompactCheckbox=$('<input type="checkbox"/>');$surfAs.add($descAs).prepend($arrowRtSvg),$labelChevronCompact.append($labelChevronCompactCheckbox,$chevronDnSvgCompact).insertAfter($surfLIsWithULs.add($descLIsWithULs).children("a, .nav-item")),$allLIs.children("a, .nav-item").after($chevronDnSvg,$chevronRtSvg),this.$n.find(".nav-item:not(a)").attr("tabIndex","-1"),this.$s=this.#getOverlayScreen(),this.$b.on("click",(function(e){e.preventDefault(),"overlay"==self.settings.mobileNavMode?$("#gardenburger-screen").hasClass("hidden")?self.#showOverlayNav():self.#hideOverlayNav():self.$n.toggleClass("revealed")})),this.$n.filter(".compact").find(".label-chevron-compact > [type=checkbox]").on("keydown",(e=>{13==e.which&&(e.preventDefault(),$(e.target).trigger("click"))})),this.#updateKeyboardHandlersDesktop(this.$n),Gardenburger.#recordWidth($surfLIs),this.applyPositionalModifiers(),this.#handleMobileMode(),this.inMobileMode||this.#manageOverflow(),$(window).on({resize:$.throttle(250,(()=>{this.applyPositionalModifiers(),this.#handleMobileMode(),this.inMobileMode||this.#manageOverflow()}))})}#updateKeyboardHandlersMobile($scope){$scope.on("keydown","a, .nav-item, .label-chevron-compact [type=checkbox]",(e=>{const $et=$(e.target),$etLI=$et.closest("#gardenburger-screen li"),$par=$etLI.parents("#gardenburger-screen li").first(),$allLIs=$("#gardenburger-screen li"),$allVisLIs=$allLIs.filter((function(){const $allParBoxes=$(this).parents("li").find(" > .label-chevron-compact > [type=checkbox]");return $allParBoxes.filter(":checked").length==$allParBoxes.length})),ix=$allLIs.index($etLI),visix=$allVisLIs.index($etLI),$chd=$etLI.children("ul, .nav-dropdown").first().children("li").first();let $t=$();switch(e.which){case 27:e.preventDefault(),self.#hideOverlayNav();break;case 37:e.preventDefault(),$et.is("[type=checkbox]")?$t=$etLI:$par.length?($t=$par,$par.find(".label-chevron-compact [type=checkbox]").first().prop("checked",!1)):$etLI.find(".label-chevron-compact [type=checkbox]").first().prop("checked",!1);break;case 38:e.preventDefault(),$allVisLIs.eq(visix-1).length&&($t=$allVisLIs.eq(visix-1));break;case 39:e.preventDefault(),$t=$allLIs.eq(ix+1),$chd.length&&$etLI.find(".label-chevron-compact [type=checkbox]").first().prop("checked",!0);break;case 40:e.preventDefault(),$t=$allVisLIs.eq(visix+1).length?$allVisLIs.eq(visix+1):$allVisLIs.first()}Gardenburger.#focusOn($t)}))}#updateKeyboardHandlersDesktop($scope){$scope.find("a, .nav-item").on("keydown",(e=>{if(this.$n.is(":not(.compact)")){const $et=$(e.target),$surfLIs=this.$n.find("ul").first().children("li"),$descLIs=$surfLIs.find("li"),$immediateChildLIs=$descLIs.not("li li li"),$allNavULs=this.$n.find("ul, .nav-dropdown"),$allNavLIs=this.$n.find("li"),$allNavAnchors=($allNavLIs.filter(((_ix,el)=>"1"==$(el).parents("ul, .nav-dropdown").first().css("opacity"))),this.$n.find("a, .nav-item")),$etLI=$et.parents($allNavLIs).first(),$nextSib=$etLI.nextAll($allNavLIs).has($allNavAnchors).first(),$prevSib=$etLI.prevAll($allNavLIs).has($allNavAnchors).first(),$parent=$etLI.parent("ul").parents($allNavLIs).has($allNavAnchors).first(),$childFirst=$etLI.find($allNavULs).first(),$childLast=$etLI.find($allNavULs).first().children($allNavLIs).last(),$nextUncle=$etLI.parent("ul").parents($allNavLIs).has($allNavAnchors).not($descLIs).first().next($allNavLIs),$prevUncle=$etLI.parent("ul").parents($allNavLIs).has($allNavAnchors).not($descLIs).first().prev($allNavLIs),focusedIsSurf=$etLI.is($surfLIs),focusedIsLev2=$etLI.is($immediateChildLIs),horzFlipped=$etLI.closest($allNavULs).is(".flip-h"),vertFlipped=this.$n.is(".flip"),horzFlippedChild=$etLI.find($allNavULs).first().is(".flip-h");let $t;switch(e.which){case 27:e.preventDefault(),$(e.target).trigger("blur");break;case 37:e.preventDefault(),focusedIsSurf?$t=$prevSib:$childFirst.length&&horzFlippedChild?$t=$childFirst:focusedIsLev2?$t=$prevUncle:horzFlipped||($t=$parent),Gardenburger.#focusOn($t);break;case 38:e.preventDefault(),focusedIsSurf&&vertFlipped?$t=$childLast:!focusedIsSurf&&$prevSib.length?$t=$prevSib:focusedIsLev2&&!vertFlipped&&($t=$parent),Gardenburger.#focusOn($t);break;case 39:e.preventDefault(),focusedIsSurf?$t=$nextSib:$childFirst.length&&!horzFlippedChild?$t=$childFirst:focusedIsLev2?$t=$nextUncle:horzFlipped&&($t=$parent),Gardenburger.#focusOn($t);break;case 40:e.preventDefault(),focusedIsSurf&&!vertFlipped?$t=$childFirst:!focusedIsSurf&&$nextSib.length?$t=$nextSib:focusedIsLev2&&vertFlipped&&($t=$parent),Gardenburger.#focusOn($t)}}}))}static#constructOverflowNavItem(txt){return $(`<li id="gardenburger-overflow" class="supress-indicator-chevron" data-gardenburger-requires-click>\n\t\t\t\t<span class="nav-item" tabindex="-1">\n\t\t\t\t\t<svg class="icon-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>\n\t\t\t\t\t${txt} <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis-vertical"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>\n\t\t\t\t</span>\n\t\t\t\t<svg class="icon-chevron icon-chevron-dn" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"></path></svg>\n\t\t\t\t<svg class="icon-chevron icon-chevron-rt" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>\n\t\t\t\t<label class="label-chevron-compact">\n\t\t\t\t\t<input type="checkbox">\n\t\t\t\t\t<svg class="icon-chevron-compact" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4488bb" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"></path></svg>\n\t\t\t\t</label>\n\t\t\t\t<ul></ul>\n\t\t\t</li>`)}#manageOverflow($injectAfter=this.$n.find("ul").first().children("li").not("[data-gardenburger-supress-overflow], #gardenburger-overflow").last()){const $topUL=this.$n.find("ul").first();let $overflowLI=this.$n.find("#gardenburger-overflow").length?this.$n.find("#gardenburger-overflow").first():Gardenburger.#constructOverflowNavItem(this.settings.overflowText);const $overflowLIUL=$overflowLI.children("ul").first();if(this.#hasOverflowingNavItems())for($injectAfter.length?$overflowLI.insertAfter($injectAfter):$overflowLI.appendTo($topUL),Gardenburger.#recordWidth($overflowLI),this.#updateKeyboardHandlersDesktop($overflowLI);this.#hasOverflowingNavItems();){this.$n.find("ul").first().children("li").not("[data-gardenburger-supress-overflow], #gardenburger-overflow, :only-child").last().appendTo($overflowLIUL)}$($overflowLIUL.children("li").get().reverse()).each(((_ix,el)=>{if(!this.#hasSpaceForNavItem($(el)))return!1;$(el).insertAfter(this.$n.find("ul").first().children("li").not("[data-gardenburger-supress-overflow], #gardenburger-overflow").last())})),$overflowLI.find("li").length?this.applyPositionalModifiers($overflowLI):$overflowLI.remove()}#hasSpaceForNavItem($li){return this.#getAvailableNavSpace()>=$li.data("width")}#getAvailableNavSpace(){const $topUL=this.$n.find("ul").first(),$firstLI=$topUL.children("li").first(),$lastLI=$topUL.children("li").last(),topULRightEdge=$topUL.offset().left+$topUL.outerWidth(),lastLIRightEdge=$lastLI.offset().left+$lastLI.outerWidth(),overflowLISpace=this.$n.find("#gardenburger-overflow > ul").has("> li:only-child").length?this.$n.find("#gardenburger-overflow").data("width"):0,topULLeftEdge=$topUL.offset().left;return topULRightEdge-lastLIRightEdge+($firstLI.offset().left-topULLeftEdge)-20+overflowLISpace}#hasOverflowingNavItems(){return this.#getAvailableNavSpace()<0}static#recordWidth($targets){$targets.each(((_ix,el)=>{$(el).data({width:$(el).outerWidth()})}))}#handleMobileMode(){$(window).width()>this.settings.breakpoint?(this.$b.filter(":hidden").hide(),"inline"==this.settings.mobileNavMode&&this.$n.is(".compact")?this.#deactivateInlineMode():this.#deactivateOverlayMode()):(this.$b.filter(":hidden").show(),"inline"==this.settings.mobileNavMode&&this.$n.is(":not(.compact)")?this.#activateInlineMode():this.#activateOverlayMode())}#getOverlayScreen(){let $ovnv=$("#gardenburger-screen");return $ovnv.length||($ovnv=Gardenburger.#constructOverlayScreen().appendTo("body"),$ovnv.on("click",(e=>{$(e.target).closest("#gardenburger-screen ul :is(a, .nav-item, label, input, button)").length||this.#hideOverlayNav()}))),$ovnv}#showOverlayNav(){const $ovnv=$("#gardenburger-screen");$ovnv.removeClass("hidden"),$ovnv.find("a, .nav-item, input, button").attr("tabindex","1"),$ovnv.find("a, .nav-item").first().trigger("focus")}#hideOverlayNav(){const $ovnv=$("#gardenburger-screen");$ovnv.addClass("hidden"),$ovnv.find("a, .nav-item, input, button").attr("tabindex","-1"),$ovnv.find(":focus").first().trigger("blur")}static#constructOverlayScreen(){return $('<div id="gardenburger-screen" class="hidden"><span class="gardenburger-screen-ex"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></span></div>')}#activateOverlayMode(){const $ovnv=this.#getOverlayScreen();$(`<span id="gb-placeholder-${this.i}"/>`).insertBefore(this.$n.find("ul").first()).hide();this.$n.find("ul").first().appendTo($ovnv),this.#updateKeyboardHandlersMobile($ovnv),this.inMobileMode=!0}#deactivateOverlayMode(){this.$s.find("ul").first().insertAfter(`#gb-placeholder-${this.i}`).prev().remove(),this.#updateKeyboardHandlersDesktop(this.$n),this.inMobileMode=!1}#activateInlineMode(){this.$n.filter(":not(.compact)").addClass("compact");const injectionLocation=$(this.$n.data("gardenburger-mobile-injection-location")),injectionType=this.$n.data("gardenburger-mobile-injection-type"),$placeholder=$(`<span id="gb-placeholder-${this.i}"/>`).hide();injectionLocation&&($(`#gb-placeholder-${this.i}`).length||$placeholder.insertBefore(this.$n),"prepend"==injectionType?this.$n.prependTo(injectionLocation):this.$n.appendTo(injectionLocation)),this.inMobileMode=!0}#deactivateInlineMode(){const phStr=`#gb-placeholder-${this.i}`,$placeholder=$(phStr);this.$n.removeClass("compact revealed"),this.$n.find(".label-chevron-compact input:checked").prop("checked",!1),this.$n.insertAfter($placeholder),$placeholder.remove(),this.inMobileMode=!1}static#focusOn($t){return void 0!==$t&&$t.length&&($t.is("a, .nav-item")?$t.trigger("focus"):$t.find("a, .nav-item").first().trigger("focus")),$t}applyPositionalModifiers($scope=this.$n.find("ul").first()){$scope.addClass("forceAllOpen ignoreHoverFocus");const self=this,$topUL=this.$n.find("ul").first(),$allDDs=$scope.find("ul, .nav-dropdown"),navIsVertFlipped=this.$n.hasClass("flip"),gutter=Number(getComputedStyle(document.body).getPropertyValue("--gutter").replace("px",""));$allDDs.each(((_ix,that)=>{$(that).removeClass("flip-h justify-bottom justify-right");let ol=$(that).offset().left,ot=$(that).offset().top,dw=$(that).outerWidth(),dh=$(that).outerHeight(),or=$(window).width()-(ol+dw),ob=$(window).height()-(ot+dh);if(self.#recordMeasurements($(that)),$(that).parents(".gardenburger ul ul").length){const $parentDD=$(that).closest($(".gardenburger ul, .gardenburger .nav-dropdown").not(that)),pol=$parentDD.data("left"),topot=$topUL.offset().top,parentIsFlipped=$parentDD.hasClass("flip-h");pol>=dw+gutter&&(parentIsFlipped||or<=0)&&$(that).addClass("flip-h"),(navIsVertFlipped&&ot+dh>topot||!navIsVertFlipped&&ob<0)&&$(that).addClass("justify-bottom")}else or<0&&ol>dw&&$(that).addClass("justify-right");self.#recordMeasurements($(that))})),$scope.removeClass("forceAllOpen"),setTimeout((()=>{$scope.removeClass("ignoreHoverFocus")}),100)}#recordMeasurements($targets){$targets.each(((_ix,that)=>{let ol=$(that).offset().left,ot=$(that).offset().top,dw=$(that).outerWidth(),dh=$(that).outerHeight(),or=$(window).width()-(ol+dw),ob=$(window).height()-(ot+dh);$(that).data({left:ol,top:ot,right:or,bottom:ob,width:dw,height:dh})}))}destroy(preserveSlotInWindowArray){preserveSlotInWindowArray=preserveSlotInWindowArray||!1,this.$n.find(".icon-arrow, .icon-chevron, .label-chevron-compact").remove(),this.$n.find(".nav-item:not(a)").removeAttr("tabindex"),$(window).add(this.$n).add(this.$b).off("click resize keydown"),this.$n.removeClass("compact revealed"),this.$n.find("ul, .nav-dropdown").removeClass("justify-right flip-v flip-h"),preserveSlotInWindowArray?window.gardenburgers[this.i]=void 0:window.gardenburgers.splice(this.i,1)}}$.fn.gardenburger=function(options){return this.each((function(){const attrSetts=$(this).data("gardenburger-options"),attrSettsAsJSON=attrSetts&&"string"==typeof attrSetts?$.parseJSON(attrSetts):attrSetts,extendedSetts=$.extend(attrSettsAsJSON,options);new Gardenburger($(this),extendedSetts)}))},$((function(){$("[data-gardenburger]").each((function(){$(this).gardenburger()}))}));
//# sourceMappingURL=main-min.js.map